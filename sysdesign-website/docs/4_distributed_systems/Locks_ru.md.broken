%%{init: {‚Äûtheme‚Äú:'base', ‚ÄûthemeVariables‚Äú: { ‚Äûprimar

yTextColor‚Äú: ‚Äû#000‚Äú, ‚ÄûfontSize‚Äú: ‚Äû11px‚Äú}}}%%flowchart TDsubgraph ¬´üî¥ –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–±–æ—á–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏¬ªsubgraph ¬´–ò–µ—Ä–∞—Ä—Ö–∏—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ä–∞–±–æ—á–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫¬ª–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ[¬´üîÑ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ<br/>–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±–µ–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è¬ª]StatefulSet[¬´üìä StatefulSet<br/>–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º¬ª]DaemonSet[¬´üåê DaemonSet<br/>–°–ª—É–∂–±—ã –Ω–∞ —É—Ä–æ–≤–Ω–µ —É–∑–ª–∞¬ª]ReplicaSet[¬´üìã ReplicaSet<br/>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–ø–ª–∏–∫–∞–º–∏¬ª]Pod[¬´üì¶ Pod<br/>–ë–∞–∑–æ–≤–∞—è –µ–¥–∏–Ω–∏—Ü–∞ –≤
—ã–ø–æ–ª–Ω–µ–Ω–∏—è¬ª]–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ -->|¬´—Å–æ–∑–¥–∞–µ—Ç –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç¬ª| ReplicaSetStatefulSet -->|¬´—Å–æ–∑–¥–∞–µ—Ç –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç¬ª| PodDaemonSet -->|¬´—Å–æ–∑–¥–∞–µ—Ç –Ω–∞ –∫–∞–∂–¥–æ–º —É–∑–ª–µ¬ª| PodReplicaSet -->|¬´–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–ø–ª–∏–∫–∏¬ª| Pod–∫–æ–Ω–µ—Ü–ø–æ–¥–≥—Ä–∞—Ñ ¬´–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è¬ªPodAutoscalers[¬´üìà Pod Autoscalers<br/>HPA: –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–ª–∏–∫<br/>VPA: –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤¬ª]PodAutoscalers -.->|¬´–º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç/–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç¬ª| –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µPodAutoscalers -.->|¬´–º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç/–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç¬ª| StatefulSet–∫–æ–Ω–µ—Ü–∫–æ–Ω–µ—Üstyle Pod fill:#e8f4fd,stroke:#1976d2,stroke-width:2px,color:#000style ReplicaSet fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px,color:#000—Å—Ç–∏–ª—å Deployment fill:#e8f5e8,stroke:#388e3c,stroke-width:2px,color:#000—Å—Ç–∏–ª—å StatefulSet fill:#fff3e0,stroke:#f57c00,stroke-width:2px,color:#000—Å—Ç–∏–ª—å DaemonSet –∑–∞–ª–∏–≤–∫–∞:#fce4ec,stroke:#c2185b,stroke-width:2px,color:#000—Å—Ç–∏–ª—å PodAutoscalers –∑–∞–ª–∏–≤–∫–∞:#f1f8e9,stroke:#689f38,stroke-width:2px,color:#000# –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—é –º–µ–∂–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏, –æ–±—Ä–∞—â–∞—é—â–∏–º–∏—Å—è –∫ –æ–±—â–∏–º —Ä–µ—Å—É—Ä—Å–∞–º, –ø—É—Ç–µ–º –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –≤–∑–∞–∏–º–Ω–æ–≥–æ –∏—Å–∫–ª—é—á–µ–Ω–∏—è. –≠—Ç–∏ –º–µ—Ö–∞–Ω–∏–∑–º—ã –∏–º–µ—é—Ç –æ—Å–Ω–æ–≤–æ–ø–æ–ª–∞–≥–∞—é—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –∑–∞–ø–∏—Å–∏ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∏–∑–±—Ä–∞–Ω–∏—è –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ª–∏–¥–µ—Ä–∞.

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ —Å–æ–ø—Ä—è–∂–µ–Ω–∞ —Å–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–º–∏ —Ç—Ä—É–¥–Ω–æ—Å—Ç—è–º–∏. –°–±–æ–∏ –≤ —Å–µ—Ç–∏ –º–æ–≥—É—Ç –±–µ–∑ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è —Ä–∞–∑–¥–µ–ª–∏—Ç—å —É–∑–ª—ã, –∑–∞–¥–µ—Ä–∂–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –Ω–µ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —á–∞—Å—ã —É—Å–ª–æ–∂–Ω—è—é—Ç –ø—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–π –æ–± —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–∏–∏, –∞ —Å–∏—Å—Ç–µ–º—ã –¥–æ–ª–∂–Ω—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ —á–∞—Å—Ç–∏—á–Ω—ã–µ —Å–±–æ–∏. –í —ç—Ç–æ–π –≥–ª–∞–≤–µ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—é—Ç—Å—è –ø—Ä–æ–±–ª–µ–º—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏, —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏.

## –ü—Ä–æ–±–ª–µ–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏

–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã —Å—Ç–∞–ª–∫–∏–≤–∞—é—Ç—Å—è —Å –Ω–µ–æ—Ç—ä–µ–º–ª–µ–º–æ–π –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ—Å—Ç—å—é. **–ß–∞—Å—Ç–∏—á–Ω—ã–µ —Å–±–æ–∏** –æ–∑–Ω–∞—á–∞—é—Ç, —á—Ç–æ –æ–¥–∏–Ω —É–∑–µ–ª –∏–ª–∏ —Å–µ—Ç–µ–≤–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –º–æ–∂–µ—Ç –≤—ã–π—Ç–∏ –∏–∑ —Å—Ç—Ä–æ—è, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ –¥—Ä—É–≥–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, —á—Ç–æ –∑–∞—Ç—Ä—É–¥–Ω—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –≤–ª–∞–¥–µ–ª–µ—Ü –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏. **–†–∞–∑–Ω–∏—Ü–∞ –≤ —á–∞—Å–∞—Ö –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å** –µ—â–µ –±–æ–ª—å—à–µ —É—Å–ª–æ–∂–Ω—è—é—Ç —Å–∏—Ç—É–∞—Ü–∏—é: –±–µ–∑ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —á–∞—Å–æ–≤ –º–∞—à–∏–Ω—ã –Ω–µ –º–æ–≥—É—Ç –Ω–∞–¥–µ–∂–Ω–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤—Ä–µ–º—è —Å–æ–±—ã—Ç–∏–π –∏–ª–∏ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –ø–æ—Ä—è–¥–æ–∫ –æ–ø–µ—Ä–∞—Ü–∏–π. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–µ—Ç–∏** –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –º–æ–≥—É—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å —É–∑–ª—ã –∏–ª–∏ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ –∑–∞–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è. –í —Ç–∞–∫–∏—Ö —Å—Ä–µ–¥–∞—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –∫–æ–Ω—Å–µ–Ω—Å—É—Å–∞ –∏–ª–∏ —Å—Ç—Ä–æ–≥–æ–π —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–æ—Å—Ç–∏ –≤ –ø—Ä–∏–Ω—Ü–∏–ø–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –±–µ–∑ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å–æ–≤. –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –º—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ø—É—Å–∫–∞—é—Ç —Å–±–æ–∏ –∏ –∑–∞–¥–µ—Ä–∂–∫–∏: –Ω–∞–ø—Ä–∏–º–µ—Ä, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∞–π–º–∞—É—Ç—ã –∏–ª–∏ –∞—Ä–µ–Ω–¥—É –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –¥–µ—Ä–∂–∞—Ç–µ–ª–µ–π –∏ –∏–∑–±–µ–≥–∞—Ç—å –ª—é–±–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∏–¥–µ–∞–ª—å–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —á–∞—Å–æ–≤.

## –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ

–†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –≤–∫–ª—é—á–∞—é—Ç:

- **–õ–æ–∫–∞–ª—å–Ω—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏** ‚Äî –°–∞–º–∞—è –Ω–∞–∏–≤–Ω–∞—è –æ—à–∏–±–∫–∞ ‚Äî –ø—Ä–∏–æ–±—Ä–µ—Ç–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –ª–æ–∫–∞–ª—å–Ω–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –ø–æ–º–æ—â—å—é –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ñ–∞–π–ª–æ–≤ –Ω–∞ —É—Ä–æ–≤–Ω–µ –û–° –∏–ª–∏ –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ—Ç–æ–∫–æ–≤). –ú–Ω–æ–≥–∏–µ –Ω–∞—á–∏–Ω–∞—é—â–∏–µ –∏–Ω–∂–µ–Ω–µ—Ä—ã –Ω–µ –æ–±—Ä–∞—â–∞—é—Ç –≤–Ω–∏–º–∞–Ω–∏—è –Ω–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä —Å–µ—Ä–≤–∏—Å–æ–≤. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —É –Ω–∞—Å –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ–ø–ª–∏–∫ —Å–µ—Ä–≤–∏—Å–∞, –¥—Ä—É–≥–∏–µ —Ä–µ–ø–ª–∏–∫–∏ –Ω–µ –±—É–¥—É—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω—ã –æ –ª–æ–∫–∞–ª—å–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ.
- **–ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –æ—Ç–∫–∞–∑–∞ —Å–µ—Ä–≤–µ—Ä–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫** ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –µ–¥–∏–Ω–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –±–µ–∑ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –∏–ª–∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏. –ü—Ä–∏ —Å–±–æ–µ —Å–µ—Ä–≤–µ—Ä–∞ –≤—Å–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–º–∏, –∏ –≤—Å—è —Å–∏—Å—Ç–µ–º–∞ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è.
- **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è/TTL –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫** ‚Äî —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ —É–¥–µ—Ä–∂–∏–≤–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –Ω–∞ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —Å—Ä–æ–∫ –±–µ–∑ —Ç–∞–π–º–∞—É—Ç–æ–≤. –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ —Å—Ç—Ä–æ—è, —É–¥–µ—Ä–∂–∏–≤–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫—É, –æ–Ω–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –Ω–∞–≤—Å–µ–≥–¥–∞, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Ç—É–ø–∏–∫–æ–≤–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏.
- **–ü—Ä–æ—Å—Ç–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–º –º–µ—Ç–∫–∞–º** ‚Äî –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —á–∞—Å–æ–≤ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –±–µ–∑ —É—á–µ—Ç–∞ —Ä–∞–∑–Ω–∏—Ü—ã –º–µ–∂–¥—É —á–∞—Å–∞–º–∏ —Ä–∞–∑–Ω—ã—Ö –º–∞—à–∏–Ω. –•–æ—Ç—è –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö —ç—Ç–æ –¥–æ–ø—É—Å—Ç–∏–º–æ, –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã—Ö –∑–∞–¥–∞—á (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏) —ç—Ç–æ –Ω–µ–ø—Ä–∏–µ–º–ª–µ–º–æ.
- **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –æ–≥—Ä–∞–∂–¥–µ–Ω–∏—è** ‚Äî –ù–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–æ–Ω–æ—Ç–æ–Ω–Ω–æ –≤–æ–∑—Ä–∞—Å—Ç–∞—é—â–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∑–∞–¥–µ—Ä–∂–∞–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å—Ç–∞—Ä—ã—Ö –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –Ω–æ–≤–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –±—ã–ª–∞ –ø–æ–ª—É—á–µ–Ω–∞ –Ω–æ–≤—ã–º –≤–ª–∞–¥–µ–ª—å—Ü–µ–º. –û–ø—è—Ç—å –∂–µ, –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ–ø—É—Å—Ç–∏–º–æ.
- **–ù–µ–∞—Ç–æ–º–∞—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞** ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –≤ –≤–∏–¥–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π ¬´–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å¬ª –∏ ¬´–ø–æ–ª—É—á–∏—Ç—å¬ª, –∞ –Ω–µ –∞—Ç–æ–º–∞—Ä–Ω–æ–≥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∏ –∑–∞–º–µ–Ω—ã, —á—Ç–æ —Å–æ–∑–¥–∞–µ—Ç —É—Å–ª–æ–≤–∏—è –¥–ª—è –≥–æ–Ω–∫–∏.
- **–ù–µ—É—á–µ—Ç –ø–∞—É–∑ GC –∏ —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–¥–µ—Ä–∂–µ–∫** ‚Äî –ù–µ—É—á–µ—Ç –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—É–∑ —Å–±–æ—Ä–∫–∏ –º—É—Å–æ—Ä–∞ –∏ —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–¥–µ—Ä–∂–µ–∫, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —Ç–æ–º—É, —á—Ç–æ –¥–µ—Ä–∂–∞—Ç–µ–ª—å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –±—É–¥–µ—Ç –∫–∞–∑–∞—Ç—å—Å—è –º–µ—Ä—Ç–≤—ã–º, –∫–æ–≥–¥–∞ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –æ–Ω –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, —á—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –ø–æ—è–≤–ª–µ–Ω–∏—é –¥–≤—É—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –¥–µ—Ä–∂–∞—Ç–µ–ª–µ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏.

–ü–æ–Ω–∏–º–∞–Ω–∏–µ —ç—Ç–∏—Ö –ø–æ–¥–≤–æ–¥–Ω—ã—Ö –∫–∞–º–Ω–µ–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã, —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Ä–∞–∑–¥–µ–ª–∞—Ö.

## –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

–°—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∏ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –∏–º–µ–µ—Ç —Å–≤–æ–∏ –≥–∞—Ä–∞–Ω—Ç–∏–∏. –ù–∏–∂–µ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –Ω–∞–∏–±–æ–ª–µ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∏–∑ –Ω–∏—Ö.

### –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏ RDBMS

**–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å—Ç—Ä–æ–∫ SQL:** –ú–Ω–æ–≥–∏–µ —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, PostgreSQL) –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É —Å—Ç—Ä–æ–∫/—Ç–∞–±–ª–∏—Ü. –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–π –ø—Ä–∏–µ–º –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã ¬´lock¬ª –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, `INSERT ... ON CONFLICT DO NOTHING`, –∞ –∑–∞—Ç–µ–º `SELECT ... FOR UPDATE` –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. –ö–æ–º–∞–Ω–¥–∞ `SELECT FOR UPDATE` –±–ª–æ–∫–∏—Ä—É–µ—Ç –¥—Ä—É–≥–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ —ç—Ç–æ–π —Å—Ç—Ä–æ–∫–µ. –≠—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã–µ –±–ª–æ–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, —Ö–æ—Ç—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ–¥–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –≤—ã–∑—ã–≤–∞–µ—Ç –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã SQL.
–î—Ä—É–≥–æ–π —Å–ø–æ—Å–æ–± ‚Äî **—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ç–µ–ª—å–Ω—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏**, –∫–æ—Ç–æ—Ä—ã–µ RDBMS, —Ç–∞–∫–∏–µ –∫–∞–∫ PostgreSQL –∏–ª–∏ MySQL, –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ª–µ–≥–∫–æ–≥–æ –º–µ—Ö–∞–Ω–∏–∑–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏. –û–Ω–∏ –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —Å—Ç—Ä–æ–∫–∞–º, –∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –∫–ª—é—á–∏. –í PostgreSQL —Å–µ—Å—Å–∏—è –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å `pg_advisory_lock(key)` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏ `pg_advisory_unlock(key)` –¥–ª—è –µ–µ —Å–Ω—è—Ç–∏—è. –ú—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ–º —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–ª—è –Ω–∏—Ö —Ç–∞–π–º–∞—É—Ç—ã. –°—É—â–µ—Å—Ç–≤—É—é—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ç–∏–≤–Ω—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ–∞–Ω—Å–∞ –∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ **–Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ–∞–Ω—Å–∞** —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –¥–æ —è–≤–Ω–æ–≥–æ —Å–Ω—è—Ç–∏—è –∏–ª–∏ –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Å–µ–∞–Ω—Å–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –∫–ª–∏–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç `SELECT pg_advisory_lock(42);`, –Ω–∏ –æ–¥–∏–Ω –¥—Ä—É–≥–æ–π —Å–µ–∞–Ω—Å –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å —Ç–æ—Ç –∂–µ –∫–ª—é—á, –ø–æ–∫–∞ –ø–µ—Ä–≤—ã–π –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç `pg_advisory_unlock` –∏–ª–∏ –Ω–µ –æ—Ç–∫–ª—é—á–∏—Ç—Å—è.

–†–µ–∫–æ–º–µ–Ω–¥—É—é—â–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ _—É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º_: PostgreSQL –Ω–µ –ø—Ä–∏–¥–∞–µ—Ç –∏–º –Ω–∏–∫–∞–∫–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è, –∞ –ø—Ä–æ—Å—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤–∑–∞–∏–º–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –∫–ª—é—á–µ–π. –û–Ω–∏ –±—ã—Å—Ç—Ä—ã (–≤ –æ–±—â–µ–π –ø–∞–º—è—Ç–∏) –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞—é—Ç—Å—è –≤ –∫–æ–Ω—Ü–µ —Å–µ–∞–Ω—Å–∞. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –≤–∫–ª—é—á–∞—é—Ç: –≤—Å–µ –∫–ª–∏–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∫–ª–∞—Å—Ç–µ—Ä –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö (–Ω–µ—Ç –º–µ–∂–±–∞–∑–æ–≤–æ–≥–æ –∏–ª–∏ –º–µ–∂—ä—è–∑—ã–∫–æ–≤–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è, –µ—Å–ª–∏ –≤—Å–µ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫ –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ –ë–î), –∏ –Ω–µ—Ç —Ç–æ–∫–µ–Ω–∞ –æ–≥—Ä–∞–∂–¥–µ–Ω–∏—è ‚Äî –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –Ω–µ —Å–æ–∑–¥–∞–µ—Ç —Ç–æ–∫–µ–Ω, –∫–æ—Ç–æ—Ä—ã–π –∫–ª–∏–µ–Ω—Ç—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞—Ä–µ–≤–∞–Ω–∏—è. –ï—Å–ª–∏ —Å–µ–∞–Ω—Å, —É–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π –±–ª–æ–∫–∏—Ä–æ–≤–∫—É, –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Å–±–æ–µ–º, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏, –Ω–æ –Ω–æ–≤—ã–π —Å–µ–∞–Ω—Å, –ø–æ–ª—É—á–∞—é—â–∏–π –±–ª–æ–∫–∏—Ä–æ–≤–∫—É, –Ω–µ –∏–º–µ–µ—Ç –ø—Ä–æ—Å—Ç–æ–≥–æ —Å–ø–æ—Å–æ–±–∞ —É–∑–Ω–∞—Ç—å, –∫–∞–∫ –¥–æ–ª–≥–æ —Å—á–∏—Ç–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –±–µ–∑–æ–ø–∞—Å–Ω–æ–π. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ª—É—á—à–µ –≤—Å–µ–≥–æ –ø–æ–¥—Ö–æ–¥—è—Ç, –∫–æ–≥–¥–∞ –≤—Å–µ —Å—Ç–æ—Ä–æ–Ω—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç PostgreSQL –∏ –Ω—É–∂–¥–∞—é—Ç—Å—è –≤ –ø—Ä–æ—Å—Ç–æ–º –º—å—é—Ç–µ–∫—Å–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –∑–∞—â–∏—Ç—ã –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è), –Ω–æ –Ω–µ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —Å –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∏–ª–∏ —Å–ª—É—á–∞–µ–≤, —Ç—Ä–µ–±—É—é—â–∏—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ –º–µ–∂–¥—É —Ü–µ–Ω—Ç—Ä–∞–º–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö.

### –ü—Ä–æ—Å—Ç–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ Redis

Redis –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ —É–ø—Ä–æ—â–∞—é—Ç –±–∞–∑–æ–≤—É—é –±–ª–æ–∫–∏—Ä–æ–≤–∫—É. –ö–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏:

`SET resource_name my_random_value NX PX 30000`

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —Å–æ–∑–¥–∞–µ—Ç –∫–ª—é—á, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (`NX`), –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç TTL –≤ 30 —Å–µ–∫—É–Ω–¥ (`PX 30000`). `my_random_value` ‚Äî —ç—Ç–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω, –≤—ã–±—Ä–∞–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç–æ–º. –ï—Å–ª–∏ `SET` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç ¬´OK¬ª, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è; –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –æ–Ω–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –¥—Ä—É–≥–æ–º—É –∫–ª–∏–µ–Ω—Ç—É.

–ü–æ—Å–∫–æ–ª—å–∫—É `SET NX PX` —è–≤–ª—è–µ—Ç—Å—è –∞—Ç–æ–º–∞—Ä–Ω–æ–π, –æ–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫–ª—é—á –∏ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –∑–∞ –æ–¥–∏–Ω —à–∞–≥. –ß—Ç–æ–±—ã –æ—Å–≤–æ–±–æ–¥–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É, –∫–ª–∏–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ–Ω –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É —è–≤–ª—è–µ—Ç—Å—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–º: –¥–ª—è —ç—Ç–æ–≥–æ –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∫—Ä–∏–ø—Ç Lua, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏ —É–¥–∞–ª—è–µ—Ç –µ–≥–æ —Ç–æ–ª—å–∫–æ –≤ —Å–ª—É—á–∞–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä:

`if redis.call(¬´get¬ª,KEYS[1]) == ARGV[1] then return redis.call(¬´del¬ª,KEYS[1]) else return 0 end`

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —É–¥–∞–ª—è–µ—Ç –∫–ª—é—á —Ç–æ–ª—å–∫–æ –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–∞–≤–Ω–æ `my_random_value`, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è —É–¥–∞–ª–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –æ–¥–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ –¥—Ä—É–≥–∏–º.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:** –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–∞—è –∏ –ø—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å—Ç–µ–∫–∞–µ—Ç –≤ —Å–ª—É—á–∞–µ —Å–±–æ—è –∫–ª–∏–µ–Ω—Ç–∞ (–ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ TTL).
**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:** –≠—Ç–æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –æ–¥–Ω–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ (–æ–¥–Ω–æ–≥–æ —É–∑–ª–∞ Redis). –ï—Å–ª–∏ —ç—Ç–æ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä Redis –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ —Å—Ç—Ä–æ—è –∏–ª–∏ —Ä–∞–∑–±–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —Ä–∞–∑–¥–µ–ª—ã, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–∞—Ä—É—à–∞–µ—Ç—Å—è (—Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è Redis —è–≤–ª—è–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π, –ø–æ—ç—Ç–æ–º—É –æ—Ç–∫–∞–∑ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —Ç–æ–º—É, —á—Ç–æ –¥–≤–∞ –º–∞—Å—Ç–µ—Ä–∞ –±—É–¥—É—Ç —Å—á–∏—Ç–∞—Ç—å, —á—Ç–æ –æ–Ω–∏ —É–¥–µ—Ä–∂–∏–≤–∞—é—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É). –ù–µ—Ç —Ç–æ–∫–µ–Ω–∞ –æ–≥—Ä–∞–∂–¥–µ–Ω–∏—è –∏–ª–∏ —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–∏—è ‚Äî –µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è TTL, –æ–Ω –º–æ–∂–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Å—á–∏—Ç–∞—Ç—å, —á—Ç–æ —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É. –ö–æ—Ä–æ—á–µ –≥–æ–≤–æ—Ä—è, —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –Ω–∞–¥–µ–∂–Ω—ã—Ö —Å–µ—Ç–µ–π –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π –≤ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ, –Ω–æ —è–≤–ª—è–µ—Ç—Å—è –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π —Ç–æ—á–∫–æ–π –æ—Ç–∫–∞–∑–∞ –∏ –Ω–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–æ–º–∏–º–æ —Ç–∞–π–º–∞—É—Ç–∞.

### Redlock

Redlock ‚Äî —ç—Ç–æ –∞–ª–≥–æ—Ä–∏—Ç–º –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –º–∞—Å—Ç–µ—Ä–∞–º–∏ –¥–ª—è Redis, –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–π Salvatore Sanfilippo, —Å–æ–∑–¥–∞—Ç–µ–ª–µ–º Redis. –û–Ω –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç –Ω–∞–ª–∏—á–∏–µ _N_ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —É–∑–ª–æ–≤ Redis (–æ–±—ã—á–Ω–æ 5). –ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É, –∫–ª–∏–µ–Ω—Ç –ø—ã—Ç–∞–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–ª—é—á –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (—Å —Ç–µ–º –∂–µ `my_random_value`) –≤ –∫–∞–∂–¥–æ–º –º–∞—Å—Ç–µ—Ä–µ Redis —Å –ø–æ–º–æ—â—å—é `SET NX PX`, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—è —ç—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏. –ö–ª–∏–µ–Ω—Ç –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç, —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ —ç—Ç–æ –∑–∞–Ω—è–ª–æ. –ï—Å–ª–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤ _–±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ_ —É–∑–ª–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 3 –∏–∑ 5) **–∏** –æ–±—â–µ–µ –≤—Ä–µ–º—è –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –º–µ–Ω—å—à–µ TTL, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø–æ–ª—É—á–µ–Ω–Ω–æ–π. –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Ä–∞–≤–µ–Ω –∏—Å—Ö–æ–¥–Ω–æ–º—É TTL –∑–∞ –≤—ã—á–µ—Ç–æ–º –ø—Ä–æ—à–µ–¥—à–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏. –ï—Å–ª–∏ –Ω–µ —É–¥–∞–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ, –æ–Ω —É–¥–∞–ª—è–µ—Ç –≤—Å–µ —á–∞—Å—Ç–∏—á–Ω—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –ø–æ–ø—ã—Ç–∫—É –ø–æ–∑–∂–µ. –î–ª—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –ø—Ä–æ—Å—Ç–æ —É–¥–∞–ª—è–µ—Ç—Å—è –∫–ª—é—á (—Å –ø–æ–º–æ—â—å—é —Ç–æ–≥–æ –∂–µ —Å–∫—Ä–∏–ø—Ç–∞ Lua) –Ω–∞ –∫–∞–∂–¥–æ–º —É–∑–ª–µ.

**–ü—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è:** Redlock –∏–º–µ–µ—Ç —Ç—É –∂–µ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—É—é –ø—Ä–æ–±–ª–µ–º—É, —á—Ç–æ –∏ –ø—Ä–æ—Å—Ç–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ redis –≤—ã—à–µ: –æ–Ω –ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –Ω–∞ –ø—Ä–∏–º–µ—Ä–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —á–∞—Å—ã. –û–Ω –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç, —á—Ç–æ –¥—Ä–µ–π—Ñ —á–∞—Å–æ–≤ –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–∞–º–∏ –∏ Redis –Ω–µ–≤–µ–ª–∏–∫ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å TTL, —Ç–∞–∫ —á—Ç–æ –º–æ–∂–Ω–æ –≤—ã—á–∏—Å–ª–∏—Ç—å –æ–∫–Ω–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –∞ —Ç–∞–∫–∂–µ –∫–æ—Ä–æ—Ç–∫–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –≤ —Å–µ—Ç–∏. –û–Ω —Ç–∞–∫–∂–µ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —Å–±–æ–∏: —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å _–±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞_ —É–∑–ª–æ–≤. –í–æ –≤—Ä–µ–º—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –∂–µ—Ä—Ç–≤—É–µ—Ç—Å—è —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å (–≤–æ–∑–º–æ–∂–Ω–æ, –ø—Ä–∏–¥–µ—Ç—Å—è –∂–¥–∞—Ç—å –∏—Å—Ç–µ—á–µ–Ω–∏—è TTL).

**–ö—Ä–∏—Ç–∏–∫–∞ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –ú–∞—Ä—Ç–∏–Ω –ö–ª–µ–ø–ø–º–∞–Ω–Ω –∏ –¥—Ä—É–≥–∏–µ —É–∫–∞–∑–∞–ª–∏, —á—Ç–æ Redlock –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–æ–∫–µ–Ω–æ–≤ –æ–≥—Ä–∞–∂–¥–µ–Ω–∏—è ‚Äî —Å–ª—É—á–∞–π–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –º–æ–Ω–æ—Ç–æ–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫. –î—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, –µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏–ª–∏ –µ–≥–æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∏—Å—Ç–µ–∫–ª–∞, –¥—Ä—É–≥–æ–π –∫–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –≤–∑—è—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É, –∏ –Ω–µ—Ç —Å–ø–æ—Å–æ–±–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–µ—Ä–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å Redlock –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –º–Ω–æ–≥–∏—Ö –¥–æ–ø—É—â–µ–Ω–∏–π –æ –≤—Ä–µ–º–µ–Ω–∏, –∏ –≤ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö –æ–Ω –º–æ–∂–µ—Ç –Ω–∞—Ä—É—à–∞—Ç—å –≤–∑–∞–∏–º–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ. –í –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Redis –¥–∞–∂–µ –µ—Å—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ –∫—Ä–∏—Ç–∏–∫—É Redlock (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∞–Ω–∞–ª–∏–∑ –ú–∞—Ä—Ç–∏–Ω–∞).

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** Redlock –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–µ–º–ª–µ–º—ã–º, –µ—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–∞ –≤—ã—Å–æ–∫–æ–¥–æ—Å—Ç—É–ø–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∏ –≤—ã –º–æ–∂–µ—Ç–µ –¥–æ–ø—É—Å—Ç–∏—Ç—å —Ä–µ–¥–∫–∏–µ –∞–Ω–æ–º–∞–ª–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –∫–æ–Ω–µ—á–Ω–∞—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –ø—Ä–∏–µ–º–ª–µ–º–∞). –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫, –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∫ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏, –µ—Å–ª–∏ –≤—ã –Ω–µ –º–æ–∂–µ—Ç–µ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è (—Ç–æ—á–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–∞—Å–æ–≤, –Ω–∏–∑–∫–∏–π –¥–∂–∏—Ç—Ç–µ—Ä —Å–µ—Ç–∏).

### –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ ZooKeeper

Apache ZooKeeper ‚Äî —ç—Ç–æ —Å–µ—Ä–≤–∏—Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ —Å –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ–º –∏–º–µ–Ω znodes, –ø–æ—Ö–æ–∂–∏–º –Ω–∞ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É. **Znode** ‚Äî —ç—Ç–æ –±–∞–∑–æ–≤–∞—è –µ–¥–∏–Ω–∏—Ü–∞ –¥–∞–Ω–Ω—ã—Ö ZooKeeper ‚Äî —É–∑–µ–ª –≤ –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–π –¥—Ä–µ–≤–æ–≤–∏–¥–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –Ω–µ–±–æ–ª—å—à–∏–µ –æ–±—ä–µ–º—ã –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏. ZooKeeper –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Ä–µ—Ü–µ–ø—Ç –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **—ç—Ñ–µ–º–µ—Ä–Ω—ã—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —É–∑–ª–æ–≤**. –≠—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π znode, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏ –µ–≥–æ —Å–æ–∑–¥–∞—Ç–µ–ª—è –∏ –∏–º–µ–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç–∞—é—â–∏–π –Ω–æ–º–µ—Ä, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–π –∫ –µ–≥–æ –∏–º–µ–Ω–∏, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ–≥–æ –∏–¥–µ–∞–ª—å–Ω—ã–º –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫.

–ö–ª–∏–µ–Ω—Ç—ã —Å–æ–≥–ª–∞—Å–æ–≤—ã–≤–∞—é—Ç –ø—É—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/locks/mylock`). –ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É, –∫–ª–∏–µ–Ω—Ç —Å–æ–∑–¥–∞–µ—Ç –¥–æ—á–µ—Ä–Ω–∏–π znode —Å —Ñ–ª–∞–≥–∞–º–∏ EPHEMERAL –∏ SEQUENTIAL –≤ —ç—Ç–æ–º –ø—É—Ç–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, `/locks/mylock/lock-0000000003`. –ë–ª–∞–≥–æ–¥–∞—Ä—è —Ñ–ª–∞–≥—É SEQUENTIAL –∫–∞–∂–¥—ã–π –Ω–æ–≤—ã–π —É–∑–µ–ª –ø–æ–ª—É—á–∞–µ—Ç –º–æ–Ω–æ—Ç–æ–Ω–Ω–æ –≤–æ–∑—Ä–∞—Å—Ç–∞—é—â–∏–π —Å—É—Ñ—Ñ–∏–∫—Å.

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è znode –∫–ª–∏–µ–Ω—Ç –ø–µ—Ä–µ—á–∏—Å–ª—è–µ—Ç –≤—Å–µ –¥–æ—á–µ—Ä–Ω–∏–µ —É–∑–ª—ã `/locks/mylock` –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –∏–º–µ–µ—Ç –ª–∏ –µ–≥–æ —É–∑–µ–ª —Å–∞–º—ã–π –Ω–∏–∑–∫–∏–π –ø–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä. –ï—Å–ª–∏ –¥–∞, —Ç–æ –æ–Ω –ø–æ–ª—É—á–∏–ª –±–ª–æ–∫–∏—Ä–æ–≤–∫—É. –ï—Å–ª–∏ –Ω–µ—Ç, –æ–Ω –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π —É–∑–µ–ª —Å –Ω–∞–∏–º–µ–Ω—å—à–∏–º –Ω–æ–º–µ—Ä–æ–º (–Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–µ–¥—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫) –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –Ω–∞ –Ω–µ–≥–æ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ. –ö–æ–≥–¥–∞ —ç—Ç–æ—Ç –ø—Ä–µ–¥—à–µ—Å—Ç–≤—É—é—â–∏–π znode —É–¥–∞–ª—è–µ—Ç—Å—è (–ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –¥–µ—Ä–∂–∞—Ç–µ–ª—å –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –∏–ª–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–±–æ–π), ZooKeeper —É–≤–µ–¥–æ–º–ª—è–µ—Ç —ç—Ç–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –∑–∞—Ç–µ–º –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –∏ –ø–æ–ª—É—á–∞–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É. –ß—Ç–æ–±—ã –æ—Å–≤–æ–±–æ–¥–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É, –∫–ª–∏–µ–Ω—Ç –ø—Ä–æ—Å—Ç–æ —É–¥–∞–ª—è–µ—Ç —Å–≤–æ–π znode (–∏–ª–∏ –æ–Ω —É–¥–∞–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ —Å–µ–∞–Ω—Å–∞).

–≠—Ç–æ—Ç –º–µ—Ö–∞–Ω–∏–∑–º –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç **—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å** –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å ¬´–≥—Ä–æ–º–∞–¥–Ω–æ–π —Ç–æ–ª–ø—ã¬ª: –∫–∞–∂–¥—ã–π –æ–∂–∏–¥–∞—é—â–∏–π –∫–ª–∏–µ–Ω—Ç –ø—Ä–æ—Å—ã–ø–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –ø—Ä–µ–¥—à–µ—Å—Ç–≤—É—é—â–∏–π –µ–º—É –∫–ª–∏–µ–Ω—Ç –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É. –ü—Ä–∏ –∫–∞–∂–¥–æ–º –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–∏ —É–≤–µ–¥–æ–º–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∫–ª–∏–µ–Ω—Ç, –æ–ø—Ä–æ—Å –∏–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è. –ü–æ—Å–∫–æ–ª—å–∫—É znodes —è–≤–ª—è—é—Ç—Å—è —ç—Ñ–µ–º–µ—Ä–Ω—ã–º–∏, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–±–æ—è—é—â–µ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞–µ—Ç—Å—è ZooKeeper. –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–º —è–≤–ª—è–µ—Ç—Å—è —Å—Ç—Ä–æ–≥–æ —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–∞—è —Å–∞–º–æ–æ—á–∏—â–∞—é—â–∞—è—Å—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞. –û—Å–Ω–æ–≤–Ω—ã–º –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–º —è–≤–ª—è–µ—Ç—Å—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –∞–Ω—Å–∞–º–±–ª—è ZooKeeper.

### etcd Lock

etcd ‚Äî —ç—Ç–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∫–ª—é—á–µ–π-–∑–Ω–∞—á–µ–Ω–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ Raft —Å–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ –ø—Ä–∏–º–∏—Ç–∏–≤–∞–º–∏ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞. –û–Ω–æ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç API `Lock`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **lease** (TTL) –∏ compare-and-swap. –¢–∏–ø–∏—á–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è: —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –∞—Ä–µ–Ω–¥—É —Å TTL, –∑–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª—é—á–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –ù–∞–ø—Ä–∏–º–µ—Ä (–≤ Go):

`// –ü—Å–µ–≤–¥–æ–∫–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ etcd Lease lease = etcd.leaseGrant(ctx, 10); // 10-—Å–µ–∫—É–Ω–¥–Ω—ã–π TTL TxnResponse txn = etcd.txn(ctx) .If(etcd.compare(CreateRevision(key), ¬´=¬ª, 0)) .Then(etcd.put(key, ¬´locked¬ª, WithLease(lease.ID))) .Commit(); // –ï—Å–ª–∏ txn.succeeded, —É –Ω–∞—Å –µ—Å—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–ª—é—á–∞.`

–≠—Ç–æ –∞—Ç–æ–º–∞—Ä–Ω—ã–º –æ–±—Ä–∞–∑–æ–º —Å–æ–∑–¥–∞–µ—Ç –∫–ª—é—á –ø–æ–¥ –∞—Ä–µ–Ω–¥–æ–π, –µ—Å–ª–∏ –æ–Ω –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –¥–æ –≤—ã–∑–æ–≤–∞ `Unlock` –∏–ª–∏ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –∞—Ä–µ–Ω–¥—ã (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –∫–ª—é—á–∞). –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∫–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –∫–ª—é—á –∑–∞ —Ä–∞–∑.

–ü–æ—Å–∫–æ–ª—å–∫—É etcd –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–Ω—Å–µ–Ω—Å—É—Å Raft, –µ–≥–æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —è–≤–ª—è—é—Ç—Å—è **–ª–∏–Ω–µ–∞—Ä–∏–∑—É–µ–º—ã–º–∏** (—Å –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ–º —É–∑–ª–æ–≤). etcd —Ç–∞–∫–∂–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–æ–Ω–æ—Ç–æ–Ω–Ω—ã–π **—Ç–æ–∫–µ–Ω –æ–≥—Ä–∞–∂–¥–µ–Ω–∏—è**: –Ω–æ–º–µ—Ä —Ä–µ–≤–∏–∑–∏–∏ —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª—é—á–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å–ª—É–∂–∏—Ç –≤ –∫–∞—á–µ—Å—Ç–≤–µ –≥–ª–æ–±–∞–ª—å–Ω–æ —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞. –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ, –∫–æ–≥–¥–∞ –∫–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É, –æ–Ω –º–æ–∂–µ—Ç –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Ä–µ–≤–∏–∑–∏—é –∫–ª—é—á–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–µ –ø—Ä–∏ –¥–æ—Å—Ç—É–ø–µ –∫ –∑–∞—â–∏—â–µ–Ω–Ω–æ–º—É —Ä–µ—Å—É—Ä—Å—É. –†–µ—Å—É—Ä—Å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —ç—Ç–æ—Ç —Ç–æ–∫–µ–Ω –∏ –æ—Ç–∫–ª–æ–Ω—è–µ—Ç –ª—é–±—É—é –æ–ø–µ—Ä–∞—Ü–∏—é —Å –±–æ–ª–µ–µ —Å—Ç–∞—Ä—ã–º —Ç–æ–∫–µ–Ω–æ–º, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–æ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ (–ø–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± –æ–≥—Ä–∞–∂–¥–µ–Ω–∏–∏ —Å–º. –Ω–∏–∂–µ). –í —Ü–µ–ª–æ–º, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ etcd —è–≤–ª—è—é—Ç—Å—è –Ω–∞–¥–µ–∂–Ω—ã–º–∏ (–≤—ã–¥–µ—Ä–∂–∏–≤–∞—é—Ç —Å–±–æ–∏, –ø–æ–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–≤–æ—Ä—É–º) –∏ —Ö–æ—Ä–æ—à–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É—é—Ç—Å—è —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏, —Ö–æ—Ç—è –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–ª—è —Å—Ç—Ä–æ–≥–æ–≥–æ –≤–∑–∞–∏–º–Ω–æ–≥–æ –∏—Å–∫–ª—é—á–µ–Ω–∏—è —Ç—Ä–µ–±—É–µ—Ç –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏ (—Å–º. ¬´–û–≥—Ä–∞–∂–¥–µ–Ω–∏–µ¬ª –Ω–∏–∂–µ).

### –¢–æ–∫–µ–Ω—ã –æ–≥—Ä–∞–∂–¥–µ–Ω–∏—è: –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏

**–¢–æ–∫–µ–Ω –æ–≥—Ä–∞–∂–¥–µ–Ω–∏—è** ‚Äî —ç—Ç–æ —Å—Ç—Ä–æ–≥–æ –≤–æ–∑—Ä–∞—Å—Ç–∞—é—â–∏–π —à—Ç–∞–º–ø, –≤—ã–¥–∞–≤–∞–µ–º—ã–π –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø–æ–ª—É—á–µ–Ω–∏–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏. –û–Ω –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –≤–Ω–µ—Å–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —É—Å—Ç–∞—Ä–µ–≤—à–∏–º –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ—Å–ª–µ –ø–æ—Ç–µ—Ä–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏. –ò–¥–µ—è –∏–ª–ª—é—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∏–∂–µ.

–ö–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –∫–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É, –æ–Ω –ø–æ–ª—É—á–∞–µ—Ç –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1, –∑–∞—Ç–µ–º 2 –∏ —Ç. –¥.). –ö–ª–∏–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∞—Ç—å —ç—Ç–æ—Ç —Ç–æ–∫–µ–Ω –≤ –ª—é–±—É—é –æ–ø–µ—Ä–∞—Ü–∏—é —Å –∑–∞—â–∏—â–µ–Ω–Ω—ã–º —Ä–µ—Å—É—Ä—Å–æ–º. –†–µ—Å—É—Ä—Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Å–∞–º—ã–π –≤—ã—Å–æ–∫–∏–π —Ç–æ–∫–µ–Ω, –∫–æ—Ç–æ—Ä—ã–π –æ–Ω –≤–∏–¥–µ–ª. –ï—Å–ª–∏ –ø–æ–∑–∂–µ –æ–Ω –ø–æ–ª—É—á–∞–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏—é —Å –±–æ–ª–µ–µ –Ω–∏–∑–∫–∏–º —Ç–æ–∫–µ–Ω–æ–º (—É–∫–∞–∑—ã–≤–∞—é—â–∏–º –Ω–∞ —Å—Ç–∞—Ä–æ–≥–æ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏), –æ–Ω –æ—Ç–∫–ª–æ–Ω—è–µ—Ç –µ–µ. –ü—Å–µ–≤–¥–æ–∫–æ–¥ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Ä–µ—Å—É—Ä—Å–∞ –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

`long lastToken = 0; void accessResource(long fencingToken, Data data) { if (fencingToken <= lastToken) { throw new IllegalStateException(¬´Stale lock holder¬ª); } // –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é —Å –¥–∞–Ω–Ω—ã–º–∏... lastToken = fencingToken; }`

–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç **–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ** —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –¥–µ—Ä–∂–∞—Ç–µ–ª–µ–π –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫: –∫–∞–∫ —Ç–æ–ª—å–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–π —Ç–æ–∫–µ–Ω, –ª—é–±–æ–π —Å—Ç–∞—Ä—ã–π —Ç–æ–∫–µ–Ω (< last) —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —É—Å—Ç–∞—Ä–µ–≤—à–∏–º –∏ –æ—Ç–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è.

–¢–æ–∫–µ–Ω—ã –æ–≥—Ä–∞–∂–¥–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã, –∫–æ–≥–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏–º–µ—é—Ç —Ç–∞–π–º–∞—É—Ç—ã. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç, –ø–æ–∫–∞ –∫–ª–∏–µ–Ω—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ –ø–∞—É–∑—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–∞—É–∑–∞ GC), –¥—Ä—É–≥–æ–π –∫–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É. –ë–µ–∑ –æ–≥—Ä–∞–∂–¥–µ–Ω–∏—è, –∫–æ–≥–¥–∞ –ø–µ—Ä–≤—ã–π –∫–ª–∏–µ–Ω—Ç –≤–æ–∑–æ–±–Ω–æ–≤–∏—Ç —Ä–∞–±–æ—Ç—É, –æ–Ω –º–æ–∂–µ—Ç –Ω–µ–æ—Å–æ–∑–Ω–∞–Ω–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–±–æ—Ç—É –∏ –ø–æ–≤—Ä–µ–¥–∏—Ç—å –æ–±—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ. –ù–∞–ø—Ä–æ—Ç–∏–≤, —Å —Ç–æ–∫–µ–Ω–∞–º–∏ —Ä–µ—Å—É—Ä—Å –æ—Ç–∫–ª–æ–Ω–∏—Ç –¥–µ–π—Å—Ç–≤–∏—è –ø–µ—Ä–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ (—Å—Ç–∞—Ä—à–∏–π —Ç–æ–∫–µ–Ω) –≤ –ø–æ–ª—å–∑—É –Ω–æ–≤–æ–≥–æ –¥–µ—Ä–∂–∞—Ç–µ–ª—è. etcd –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–∫–µ–Ω—ã –æ–≥—Ä–∞–∂–¥–µ–Ω–∏—è —á–µ—Ä–µ–∑ –Ω–æ–º–µ—Ä–∞ —Ä–µ–≤–∏–∑–∏–π: —Ä–µ–≤–∏–∑–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª—é—á–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø–æ–ª—É—á–µ–Ω–∏–∏. –ö–∞–∫ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç –∞–Ω–∞–ª–∏–∑ Jepsen, –∫–ª–∏–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç—É —Ä–µ–≤–∏–∑–∏—é –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ç–æ–∫–µ–Ω–∞ –∏ –æ–±–µ—Å–ø–µ—á–∏—Ç—å, —á—Ç–æ–±—ã —Ä–µ—Å—É—Ä—Å –æ—Ç–∫–ª–æ–Ω—è–ª –ª—é–±—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –±–æ–ª–µ–µ –Ω–∏–∑–∫–æ–π —Ä–µ–≤–∏–∑–∏–µ–π. ZooKeeper –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç `zxid` –∏–ª–∏ –Ω–æ–º–µ—Ä –≤–µ—Ä—Å–∏–∏ znode –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ç–æ–∫–µ–Ω–∞ –æ–≥—Ä–∞–∂–¥–µ–Ω–∏—è. –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –ª—é–±–∞—è —Å–∏—Å—Ç–µ–º–∞, –∏—Å–ø–æ–ª—å–∑—É—é—â–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ TTL, –¥–æ–ª–∂–Ω–∞ –≤–∫–ª—é—á–∞—Ç—å —Ç–æ–∫–µ–Ω—ã –æ–≥—Ä–∞–∂–¥–µ–Ω–∏—è, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π.

### –î—Ä—É–≥–∏–µ –º–µ—Ç–æ–¥—ã

–ü–æ–º–∏–º–æ –≤—ã—à–µ–ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω–æ–≥–æ, –º–Ω–æ–≥–∏–µ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç –ø—Ä–∏–º–∏—Ç–∏–≤—ã –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:

- **–£—Å–ª–æ–≤–Ω–∞—è –∑–∞–ø–∏—Å—å DynamoDB:** –í—ã –º–æ–∂–µ—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É, –∏—Å–ø–æ–ª—å–∑—É—è —ç–ª–µ–º–µ–Ω—Ç DynamoDB –≤ –∫–∞—á–µ—Å—Ç–≤–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏ –≤—ã–ø–æ–ª–Ω—è—è —É—Å–ª–æ–≤–Ω—É—é –∫–æ–º–∞–Ω–¥—É `PutItem` (–∏–ª–∏ `UpdateItem`) —Ç–æ–ª—å–∫–æ –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –∞—Ç—Ä–∏–±—É—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–æ–º–µ—Ä –≤–µ—Ä—Å–∏–∏) —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —É—Å–ª–æ–≤–∏—é. ¬´–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞¬ª DynamoDB –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞—Ç—Ä–∏–±—É—Ç –≤–µ—Ä—Å–∏–∏ –∏ —É—Å–ª–æ–≤–Ω—É—é –∑–∞–ø–∏—Å—å: –µ—Å–ª–∏ –≤–µ—Ä—Å–∏—è —Å–æ–≤–ø–∞–¥–∞–µ—Ç, –∑–∞–ø–∏—Å—å –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è; –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –æ–Ω–∞ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π (–≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏–µ `ConditionalCheckFailedException`). –§–∞–∫—Ç–∏—á–µ—Å–∫–∏ —ç—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø. AWS –¥–∞–∂–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–ª–∏–µ–Ω—Ç—Å–∫—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É DynamoDB Lock Library, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–æ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω –≤ —Å–æ—á–µ—Ç–∞–Ω–∏–∏ —Å –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏ TTL.
- **–°–µ—Å—Å–∏–∏ Consul:** HashiCorp Consul –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —á–µ—Ä–µ–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ KV –∏ _sessions_. –ö–ª–∏–µ–Ω—Ç —Å–æ–∑–¥–∞–µ—Ç —Å–µ—Å—Å–∏—é (—Å TTL –∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏) –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç KV PUT —Å —Å–µ—Å—Å–∏–µ–π (–æ–ø–µ—Ä–∞—Ü–∏—è ¬´Acquire¬ª). –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–µ—Å—Å–∏–∏. KV API Consul –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **LockIndex**, –∫–æ—Ç–æ—Ä—ã–π —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–∏–∏. –ú–æ–∂–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å `(Key, LockIndex, SessionID)` –∫–∞–∫ —Å–µ–∫–≤–µ–Ω—Å–æ—Ä: –ø—Ä–∏ –∫–∞–∂–¥–æ–º –Ω–æ–≤–æ–º –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–∏–∏ `LockIndex` —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è. Consul –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –∏–ª–∏ —É–¥–∞–ª—è–µ—Ç –∫–ª—é—á–∏ –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Å–µ–∞–Ω—Å–æ–≤. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, Consul –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–∞–∫ –º–µ—Ö–∞–Ω–∏–∑–º –∏—Å—Ç–µ—á–µ–Ω–∏—è (—á–µ—Ä–µ–∑ TTL –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏), —Ç–∞–∫ –∏ —Ç–æ–∫–µ–Ω (`LockIndex`) –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–µ—Ä–∂–∞—Ç–µ–ª–µ–π.
- **Hazelcast/Infinispan:** —ç—Ç–∏ Java-—Å–µ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –ø–∞–º—è—Ç–∏ –≤–∫–ª—é—á–∞—é—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, _FencedLock_ Hazelcast (–≤ –ø–æ–¥—Å–∏—Å—Ç–µ–º–µ CP) –≤—ã–¥–∞–µ—Ç –º–æ–Ω–æ—Ç–æ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω –æ–≥—Ä–∞–∂–¥–µ–Ω–∏—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø–æ–ª—É—á–µ–Ω–∏–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏. –≠—Ç–æ—Ç —Ç–æ–∫–µ–Ω –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤–æ –≤–Ω–µ—à–Ω–∏–µ —Ä–µ—Å—É—Ä—Å—ã –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Ä–µ–≤–∏–∑–∏–∏ etcd, –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—è, —á—Ç–æ —Å—Ç–∞—Ä—ã–µ –¥–µ—Ä–∂–∞—Ç–µ–ª–∏ –Ω–µ —Å–º–æ–≥—É—Ç –≤–º–µ—à–∞—Ç—å—Å—è. (–û–±—ã—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `IMap.lock()` Hazelcast —Ç–∞–∫–∂–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É, –Ω–æ –±–µ–∑ —Ç–æ–∫–µ–Ω–æ–≤ –æ–≥—Ä–∞–∂–¥–µ–Ω–∏—è.)
- **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ Firestore/Cloud Spanner:** Cloud Firestore (—Å–µ—Ä–≤–µ—Ä–Ω—ã–π SDK) –∏ Google Cloud Spanner –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –Ω–∞–¥–µ–∂–Ω—ã–µ —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ–º—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. –í –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö Firestore –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è **–±–ª–æ–∫–∏—Ä—É–µ—Ç** –¥–æ–∫—É–º–µ–Ω—Ç—ã –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏: –¥—Ä—É–≥–∏–µ –∑–∞–ø–∏—Å–∏ –≤ —ç—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã –æ–∂–∏–¥–∞—é—Ç –¥–æ –º–æ–º–µ–Ω—Ç–∞ —Ñ–∏–∫—Å–∞—Ü–∏–∏. Cloud Spanner –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±—â–∏–µ/–∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ —è—á–µ–π–∫–∏ (—Å—Ç—Ä–æ–∫–∞ + —Å—Ç–æ–ª–±–µ—Ü) –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —á—Ç–µ–Ω–∏—è-–∑–∞–ø–∏—Å–∏. –ù–µ–±–æ–ª—å—à—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–ø–∏—Å—å —Å—Ç—Ä–æ–∫–∏ ¬´–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞¬ª) –º–æ–∂–Ω–æ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∫–∞–∫ –º—å—é—Ç–µ–∫—Å. –≠—Ç–∏ –≥–∞—Ä–∞–Ω—Ç–∏–∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç—Å—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –∞ –Ω–µ –æ—Ç–¥–µ–ª—å–Ω—ã–º —Å–µ—Ä–≤–∏—Å–æ–º –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏.

–ö–∞–∂–¥—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –∏–º–µ–µ—Ç —Å–≤–æ–∏ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å—ã –≤ –ø–ª–∞–Ω–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏. –í—ã–±–æ—Ä –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –º–∞—Å—à—Ç–∞–±–∞ —Å–∏—Å—Ç–µ–º—ã –∏ —Ç—Ä–µ–±—É–µ–º—ã—Ö –≥–∞—Ä–∞–Ω—Ç–∏–π.

## –í—ã–≤–æ–¥

–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ ‚Äî –º–æ—â–Ω—ã–π, –Ω–æ —Å–ª–æ–∂–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º. **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –≥–∞—Ä–∞–Ω—Ç–∏—è–º**: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞ –∫–æ–Ω—Å–µ–Ω—Å—É—Å–µ (ZooKeeper, etcd, Hazelcast CP), –∫–æ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å—Ç—Ä–æ–≥–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –∏ –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (Redis, –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ç–∏–≤–Ω—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏), –∫–æ–≥–¥–∞ –º–æ–∂–Ω–æ –¥–æ–ø—É—Å—Ç–∏—Ç—å –º–µ–Ω–µ–µ —Å—Ç—Ä–æ–≥—É—é —Å–µ–º–∞–Ω—Ç–∏–∫—É. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–∫–µ–Ω—ã –æ–≥—Ä–∞–∂–¥–µ–Ω–∏—è** –ø—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫, —á—Ç–æ–±—ã —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∫–ª–∏–µ–Ω—Ç—ã –Ω–µ –º–æ–≥–ª–∏ –ø–æ–≤—Ä–µ–¥–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ. –í—Å–µ–≥–¥–∞ –≤–∫–ª—é—á–∞–π—Ç–µ **—Ç–∞–π–º-–∞—É—Ç—ã –∏ TTL** –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫, –∞ —Ç–∞–∫–∂–µ –ø–ª–∞–Ω–∏—Ä—É–π—Ç–µ –æ—Ç–∫–∞–∑—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ —Å–±–æ–µ, –æ—á–∏—Å—Ç–∫–∞ –æ—Å–∏—Ä–æ—Ç–µ–≤—à–∏—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫). –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É—á–∏—Ç—ã–≤–∞–π—Ç–µ –≥—Ä–∞–Ω—É–ª—è—Ä–Ω–æ—Å—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –∏ **–ø–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—Ö–æ–¥**. –ü—Ä–æ–µ–∫—Ç–∏—Ä—É–π—Ç–µ —Å —É—á–µ—Ç–æ–º —Ö—É–¥—à–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ (—Ä–∞–∑—Ä—ã–≤ —Å–µ—Ç–∏, –º–µ–¥–ª–µ–Ω–Ω—ã–µ —á–∞—Å—ã) –∏ –ø–æ–º–Ω–∏—Ç–µ, —á—Ç–æ –µ—Å–ª–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ —Å–±–æ—é —Å–∏—Å—Ç–µ–º—ã –≤ —Å–ª—É—á–∞–µ —Å–±–æ—è, –≤–æ–∑–º–æ–∂–Ω–æ, –≤–∞–º –ø—Ä–∏–¥–µ—Ç—Å—è –ø–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ–µ–∫—Ç. –ü–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç–¥–∞–≤–∞–π—Ç–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–µ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–º –æ–ø–µ—Ä–∞—Ü–∏—è–º –∏–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è (–≤—ã–±–æ—Ä –ª–∏–¥–µ—Ä–∞, —Å–µ–∫–≤–µ–Ω—Å–æ—Ä—ã), —á—Ç–æ–±—ã —É–º–µ–Ω—å—à–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –º—å—é—Ç–µ–∫—Å–æ–≤.